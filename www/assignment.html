<ion-view title="Assignment">
	<ion-nav-buttons side="right">
		<button menu-toggle="right"class="button button-icon icon ion-navicon"></button>
	</ion-nav-buttons>

	<nov-content>
		<h1>{{assignment.name}}</h1>
		<nov-frame class="assignment">
			See <a href="{{assignment.url}}">{{assignment.url}}</a>
			<hr>
			Due {{assignment.dueDate}}
			Posted {{assignment.uploadDate}}
		</nov-frame>

		<nov-frame class="submission">
			<!--Student: Can submit and add comments.-->
			<form ng-if="user=='student'" name="submit" class="submissions">
				<span ng-repeat="submission in submissions">
					<h1>Grade</h1> {{submission.actualGrade}} / {{assignment.totalGrade}} <br />
					<h1>Comment</h1> {{submission.instructorComment}}<br />
					<h1>Submitted date:</h1> {{submission.submitDate}}
				</span>
				<hr ng-if="submissions.length > 0">
				<!--If the assignment has been submitted, show the submissions.-->
				<span>
					<h1>Worth {{assignment.weight}}%</h1>
					<h1>Grade / {{assignment.totalGrade}}</h1>
					<h1>Add a Comment</h1><input type="text" ng-model="submission.studentComment" /><br />
					<!--Button text is 'Resubmit' if there are submissions-->
					<input type="file" id="file" name="file" required/>
					<button ng-if="submissions.length==0" ng-click="save(submission)">Submit</button> <button ng-if="submissions.length > 0" ng-click="save(submission)">Resubmit</button>
				</span>
			</form>

			<!--Instructor: Grade and instructor comment fields are editable.-->
			<form ng-if="user=='instructor'" name="submit" class="submissions">
				<span ng-repeat="submission in submissions">
					<h1>Grade</h1> 
					<input type="text" ng-model="submission.grade" ng-pattern="pattern" placeholder="{{submission.actualGrade}}"/> / {{assignment.totalGrade}} <br />
					<h1>Comment</h1> {{submission.instructorComment}} <input type="text" ng-model="submission.comment" /><br />
					<h1>Submitted date:</h1> date
				</span>
				<hr ng-if="submissions.length > 0">
				<span>
					<h1>Worth {{assignment.weight}}% </h1>
					<h1>Grade / {{assignment.totalGrade}}</h1>
					<h1>Add a Comment</h1><input type="text" ng-model="submission.studentComment" /><br />
					<!--Button text is 'Resubmit' if there are submissions-->
					<input type="file" id="file" name="file"/>
					<button ng-click="uploadFile()">Browse</button> <button ng-if="submissions.length==0" ng-click="save(submission)">Submit</button> <button ng-if="submissions.length > 0" ng-click="save(submission)">Resubmit</button>
				</span>
			</form>

		</nov-frame>

	</nov-content>

</ion-view>
