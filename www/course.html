<ion-view title="{{ course.name }}">
	<ion-nav-buttons side="right">
	<button menu-toggle="right"class="button button-icon icon ion-navicon"></button>
	</ion-nav-buttons>

	<nov-content>
		<nov-course-icons></nov-course-icons>
		<h1>Course Materials</h1>

		<!--Instructor options-->
		<span ng-if="user == 'instructor'">
			<!--BUG: Opening Add section hides the rest of the page contents.-->
			<button ng-click="editing=!editing">Add</button>
			<span ng-show="editing">
				<nov-frame>
					<!--File uploader-->
					<h1>Upload File</h1>
						<form id="courseMaterial">
							<input type="file" id="file" name="file" ng-model="courseMaterial.file" required/><br>
							<input type="text" ng-model="courseMaterial.name" placeholder="File Name" required><br>
							<select ng-model="courseMaterial.fileType" ng-options="option as option.name for option in fileTypeOptions">
								<option value="">-- Choose File Type --</option>
							</select><br>
							<button ng-click="upload(courseMaterial)">Submit</button>
						</form>
					<!--Text editor needs a lot of styling TLC.-->
					<h1>Text Editor</h1>
					<text-angular ng-model="course.editorData" 
						ta-toolbar-class="editor-btn-toolbar"
						ta-toolbar-button-class="editor-btn editor-btn-default"
						ta-toolbar-group-class="editor-btn-group">
					</text-angular>
				</nov-frame>
			</span>
		</span>
		
		<div id="sort-options">
			<button ng-click="predicate = 'name'; reverse=!reverse">Sort by Name</button>
			<button ng-click="predicate = 'uploadDate'; reverse=!reverse">Sort by Date</button>
		</div>
		Search: <input ng-model="searchText">
		<nov-frame class="materials"
			   ng-repeat="material in materials | orderBy:predicate:reverse | filter:searchText">
					<a href="#/app/courses/{{course.id}}/materials/{{material.id}}">
						<button>{{material.name}}</button>
					</a>
					<ul>
						<li><b>Uploaded:</b> {{ material.uploadDate }}</li>
						<li><b>Type:</b> {{ material.fileType }}</li>
					</ul>
		</nov-frame>

		
		<h1>Notifications</h1>	
		<nov-frame class="notifications">
		</nov-frame>	
	</nov-content>

</ion-view>
